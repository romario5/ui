"use strict";let e=["div","p","span","a","b","i","u","sup","sub","font","meta","form","label","input","select","option","textarea","button","ul","ol","li","table","tbody","thead","tr","td","img","video","source","canvas","script","style","title","h1","h2","h3","h4","h5","h6","blockquote","br","hr","main","section","article"],t=/(^|\s)\w+/gi,s=/\.\w+[_\-\w\d]*/gi,n=/#\w+[_\-\w]*/gi;function r(s){let n=s.match(t);return null!==n&&n.length>0&&(n=n[0]),null===n||0===n.length?"div":(e.includes(n)||(r="Invalid tag name used: "+n,console.warn("UIScheme:",r)),null==n?"div":n);var r}function o(e){let t=e.match(s);if(null!==t&&t.length>0)for(let e=0;e<t.length;e++)t[e]=l(t[e].slice(1));return null===t?[]:t}function i(e){let t=e.match(n);return null!==t&&t.length>0?t[0].slice(1).trim():""}function l(e){return function(e){return e.replace(/([A-Z]+)/g,",$1").replace(/^,/,"").split(",")}(e.replace(/\//g,"_").replace(" - ","-")).join("-").replace(/([a-zA-Z_-])\s+([a-zA-Z_\-\d])/g,"$1-$2").replace(/\s*-+\s*/gi,"-").replace(/-*_-*/gi,"_").toLowerCase()}const h=Symbol("selector"),a=Symbol("data"),c=Symbol("classesArray"),d=Symbol("className"),u=Symbol("id"),p=Symbol("tagName"),m=Symbol("events"),f=Symbol("extensions"),g=Symbol("element"),y=Symbol("stylesRendered");let b={};class w{constructor(e){this.context=void 0===e?this:e,this.name=null,this.handlers={}}on(e,t){let s=e.split("->");s.forEach(((e,t,s)=>s[t]=e.trim())),this.handlers.hasOwnProperty(s[0])||(this.handlers[s[0]]=new v(s[0])),this.handlers[s[0]].addHandler(t,s.length>1?s[1]:void 0)}off(e){let t=e.split("->");t.forEach(((e,t,s)=>s[t]=e.trim())),this.handlers.hasOwnProperty(t[0])&&(t.length>1&&t[1].length>0?this.handlers[t[0]].removePortHandler(t[1]):this.handlers[t[0]].removeAllHandlers())}trigger(e,...t){let s=e.split("->");s.forEach(((e,t,s)=>s[t]=e.trim())),this.handlers.hasOwnProperty(s[0])&&(s.length>1&&s[1].length>0?this.handlers[s[0]].runPortHandler(s[1],this.context,...t):this.handlers[s[0]].runAllHandlers(this.context,...t))}triggerDirect(e,...t){this.handlers.hasOwnProperty(e)&&this.handlers[e].runAllHandlers(this.context,...t)}static get(e,t){return b.hasOwnProperty(e)||(b[e]=new w(t),b[e].name=e),b[e]}}class v{constructor(e){this.eventName=e,this.handlers=[],this.ports={}}addHandler(e,t){void 0===t?this.handlers.push(e):this.ports[t]=e}removeAllHandlers(){this.handlers=[],this.ports={}}removePortHandler(e){delete this.ports[e]}runPortHandler(e,t,...s){this.ports.hasOwnProperty(e)&&this.ports[e].call(t,...s)}runAllHandlers(e,...t){for(let s=0;s<this.handlers.length;s++)this.handlers[s].call(e,...t);for(let s in this.ports)this.ports[s].call(e,...t)}}class S extends class{constructor(){this[m]=new w(this)}on(e,t){this[m].on(e,t)}off(e,t){this[m].off(e,t)}trigger(e,...t){this[m].trigger(e,...t)}}{constructor(){super(),this[f]=[]}}class P extends S{constructor(e){super();let t=r(e).toLowerCase();this.node=document.createElement(t),this.node[g]=this;let s=i(e);""!==s&&(this.node.id=s);let n=o(e).join(" ");""!==n&&(this.node.className=n),this.selector=t+(""===s?"":"#"+s)+(""===n?"":"."+n.replace(" ",".")),"input"!==t&&"textarea"!==t&&"select"!==t||Object.defineProperty(this,"value",{get(){return this.node.value},set(e){this.node.value=e}})}css(e,t){if("object"==typeof e)for(let t in e)this.node.style[t]=e[t];else this.node.style[e]=t}attr(e,t){if(void 0===t)return this.node.getAttribute(e);this.node.setAttribute(e,t)}node(){return this.node}}P.symbol=g;let E=["submit","abort","beforeinput","blur","click","compositionen","paste","compositionstart","compositionupdate","dblclick","error","focus","change","focusin","focusout","input","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mousewheel","mouseup","resize","scroll","select","unload","wheel","touchstart","touchend","touchmove"];function O(e,...t){let s=e.target;for(s.hasOwnProperty(g)&&(e.targetElement=s[g]);null!==s&&s.hasOwnProperty(g);)s[g][m].triggerDirect(e.type,e,...t),s=s.parentNode}for(let e=0,t=E.length;e<t;e++)document.addEventListener(E[e],O,{capture:!0});class x{constructor(e){this.cssObject=e,this.cssString="",this.styleNode=null,void 0===x.headNode&&(x.headNode=document.getElementsByTagName("head")[0])}renderFor(e,t){""!==this.cssString&&!0!==t||(this.cssString=x.renderRules(e,e.rootElement.selector,this.cssObject),null!==this.styleNode&&x.headNode.removeChild(this.styleNode),this.styleNode=document.createElement("style"),this.styleNode.textContent="\n"+this.cssString+"\n",x.headNode.appendChild(this.styleNode))}static renderRules(e,t,s){let n=t+" {\n",r="";for(let o in s){let i=s[o];if("string"==typeof i||"number"==typeof i)n+="    "+l(o)+": "+s[o]+";\n";else if(e[o]){let s=e[o]instanceof P?e[o]:e[o].rootElement;r+=x.renderRules(s,t+" > "+s.selector,i)}else":"===o[0]||"."===o[0]||"["===o[0]||"#"===o[0]||" "===o[0]||">"===o[0]?r+=x.renderRules(e,t+o,i):"@"===o[0]?r+=x.renderRules(e,o,i):n+=x.renderRules(e,o,i)}return n+"}\n"+r}}class A{constructor(e,t){"object"==typeof e&&(t=e,e=""),"object"!=typeof t&&(t={}),this[p]=l(r(e)),this[u]=i(e),this[c]=o(e),this[a]=t,this[h]=this[p],""!==this[u]&&(this[h]+="#"+this[u]),this[c].length>0&&(this[h]+="."+this[c].join("."))}static build(e,t){t=void 0===t||""===t?"":"."+l(t);let s=new P(e[h]+t),n=e[a];for(let e in n){"string"==typeof n[e]&&(n[e]=new A(n[e].indexOf(".")<0?n[e]+"."+e:n[e]));let t=l(e);n[e]instanceof A?(s[e]=A.build(n[e]),s[e].selector+="."+t,s[e].node.classList.add(t),s.node.appendChild(s[e].node)):"function"==typeof n[e].appendTo?(n[e].rootElement.selector+="."+t,n[e].rootElement.node.classList.add(t),n[e].appendTo(s),s[e]=n[e]):"object"==typeof n[e]&&(s[e]=A.build(new A(n[e])),s[e].selector+="."+t,s[e].node.classList.add(t),s.node.appendChild(s[e].node))}return s}}let N=0;class j extends S{constructor(e){super(),this.constructor.hasOwnProperty(d)||(this.constructor[d]=(N++,"uis-id-"+N));let t=this.defaultParams();if(this.params="object"==typeof e?e:{},"object"==typeof t&&"object"==typeof e)for(let e in t)this.params.hasOwnProperty(e)||(this.params[e]=t[e]);this.init(...arguments),this.render(this.params),this.constructor.hasOwnProperty(y)||(this.createStyles().renderFor(this,!1),this.constructor[y]=!0)}init(e){}createScheme(){return new A({})}onBeforeRender(e){}onRender(e){}render(e){this.onBeforeRender(e),this.trigger("beforeRender");let t=this.createScheme();"string"==typeof t?t=new A(t):t instanceof A||(t=new A("div",t));let s=t[c].join(" ");s=s.length<=1||"Function"===s?this.constructor[d]:"",this.rootElement=A.build(t,s);for(let e in this.rootElement)this.rootElement.hasOwnProperty(e)&&(this.rootElement[e]instanceof P||this.rootElement[e]instanceof j)&&(this[e]=this.rootElement[e]);return this.onRender(e),this.trigger("render"),this}onBeforeAppend(e){return e}appendTo(e){let t=this.onBeforeAppend(e);this.trigger("beforeAppend"),void 0!==t&&(e=t);let s=e;"string"==typeof e?s=document.querySelector(e):e instanceof P?s=e.node:e instanceof j&&(s=e.rootElement.node),s.appendChild(this.rootElement.node),this.onAppend(e),this.trigger("append",e)}onAppend(e){}onBeforeLoad(e){}onLoad(e,t){}onGather(e,t){}createStyles(){return new x({})}defaultParams(){return null}}var L={UI:j,Scheme:A,Styles:x,EventsChannel:w,Localization:class{constructor(e){this.locale="en",this.translations=e||{},this[m]=new w,this.translate=(e,t)=>{let s=e;if(this.translations.hasOwnProperty(this.locale)&&this.translations[this.locale].hasOwnProperty(e)&&(s=this.translations[this.locale][e]),"object"==typeof t)for(let e in t)s=s.replace("{"+e+"}",t[e]);return s}}switchLocaleTo(e){this.locale=e,this.trigger("change",e)}on(e,t){this[m].on(e,t)}off(e,t){this[m].off(e,t)}trigger(e,...t){this[m].trigger(e,...t)}},builtIn:{ui:{Button:Button,Input:Input,Select:Select,ProgressBar:ProgressBar,LabeledText:LabeledText,Spinner:Spinner},extensions:{InputFilter:InputFilter}}};module.exports=L;
//# sourceMappingURL=ui-scheme.cjs.min.js.map

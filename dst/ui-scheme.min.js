(function(){'use strict';function a(a){console.warn(a)}function b(b){let c=b.match(i);return(null!==c&&0<c.length&&(c=c[0]),null===c||0===c.length)?"div":(h.includes(c)||a("Invalid tag name used: "+c),null==c?"div":c)}function c(a){let b=a.match(j);if(null!==b&&0<b.length)for(let a=0;a<b.length;a++)b[a]=f(b[a].slice(1));return null===b?[]:b}function d(a){let b=a.match(k);return null!==b&&0<b.length?b[0].slice(1).trim():""}function e(a){return a.replace(/([A-Z]+)/g,",$1").replace(/^,/,"").split(",")}function f(a){return e(a.replace(/\//g,"_").replace(" - ","-")).join("-").replace(/([a-zA-Z_-])\s+([a-zA-Z_\-\d])/g,"$1-$2").replace(/\s*-+\s*/gi,"-").replace(/-*_-*/gi,"_").toLowerCase()}function g(a,...b){a.target.hasOwnProperty(o)&&a.target[o].trigger(a.type,a,...b)}let h=["div","p","span","a","b","i","u","sup","sub","font","meta","form","label","input","select","option","textarea","button","ul","ol","li","table","tbody","thead","tr","td","img","video","source","canvas","script","style","title","h1","h2","h3","h4","h5","h6","blockquote","br","hr","main","section","article"],i=/(^|\s)\w+/ig,j=/\.\w+[_\-\w\d]*/ig,k=/#\w+[_\-\w]*/ig,l={};class m{constructor(a){this.name=a,this.handlers={}}on(a,b){let c=a.split("->");c.forEach((b,c,d)=>d[c]=b.trim()),this.handlers.hasOwnProperty(c[0])||(this.handlers[c[0]]=new n(c[0])),this.handlers[c[0]].addHandler(b,1<c.length?c[1]:void 0)}off(a){let b=a.split("->");b.forEach((b,c,d)=>d[c]=b.trim()),this.handlers.hasOwnProperty(b[0])&&(1<b.length&&0<b[1].length?this.handlers[b[0]].removePortHandler(b[1]):this.handlers[b[0]].removeAllHandlers())}trigger(a,...b){let c=a.split("->");c.forEach((b,c,d)=>d[c]=b.trim()),this.handlers.hasOwnProperty(c[0])&&(1<c.length&&0<c[1].length?this.handlers[c[0]].runPortHandler(c[1],this,...b):this.handlers[c[0]].runAllHandlers(this,...b))}static get(a){return l.hasOwnProperty(a)||(l[a]=new m(a)),l[a]}}class n{constructor(a){this.eventName=a,this.handlers=[],this.ports={}}addHandler(a,b){b===void 0?this.handlers.push(a):this.ports[b]=a}removeAllHandlers(){this.handlers=[],this.ports={}}removePortHandler(a){delete this.ports[a]}runPortHandler(a,b,...c){this.ports.hasOwnProperty(a)&&this.ports[a].call(b,...c)}runAllHandlers(a,...b){for(let c=0;c<this.handlers.length;c++)this.handlers[c].call(a,...b);for(let c in this.ports)this.ports[c].call(a,...b)}}let o=Symbol(),p=Symbol(),q=Symbol(),r=["submit","abort","beforeinput","blur","click","compositionen","paste","compositionstart","compositionupdate","dblclick","error","focus","change","focusin","focusout","input","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mousewheel","mouseup","resize","scroll","select","unload","wheel","touchstart","touchend","touchmove"];for(let a=0,b=r.length;a<b;a++)document.addEventListener(r[a],g,{capture:!0});class s{constructor(a){this.node=document.createElement(b(a)),this.node[o]=this;let e=d(a);""!==e&&(this.node.id=d(a));let f=c(a);""!==f&&(this.node.className=f),this.selector=a,this[p]=new m(p),this[q]={}}css(a,b){if("object"==typeof a)for(let b in a)this.node.style[b]=a[b];else this.node.style[a]=b}on(a,b){this[p].on(a,b)}off(a,b){this[p].off(a,b)}trigger(a,...b){this[p].trigger(a,...b)}attr(a,b){return void 0===b?this.node.getAttribute(a):void this.node.setAttribute(a,b)}node(){return this.node}}s.symbol=o;class u{constructor(a){this.cssObject=a,this.cssString="",this.styleNode=null,u.headNode===void 0&&(u.headNode=document.getElementsByTagName("head")[0])}renderFor(a,b){""!==this.cssString&&!0!==b||(this.cssString=u.renderRules(a,a.rootElement.selector,this.cssObject),null!==this.styleNode&&u.headNode.removeChild(this.styleNode),this.styleNode=document.createElement("style"),this.styleNode.textContent="\n"+this.cssString+"\n",u.headNode.appendChild(this.styleNode))}static renderRules(a,b,c){let d=b+" {\n",e="";for(let g in c){let h=c[g];if("string"==typeof h)d+="    "+f(g)+": "+c[g]+";\n";else if(a[g]){let c=a[g]instanceof s?a[g]:a[g].rootElement;e+=u.renderRules(c,b+" > "+c.selector,h)}else":"===g[0]&&(e+=u.renderRules(a,b+g,h))}return d+"}\n"+e}}let v=Symbol("selector"),w=Symbol("data"),x=Symbol("classes"),y=Symbol("id"),z=Symbol("tagName");class A{constructor(a,e){"object"==typeof a&&(e=a,a=""),"object"!=typeof e&&(e={}),this[z]=f(b(a)),this[y]=d(a),this[x]=c(a),this[w]=e,this[v]=this[z],""!==this[y]&&(this[v]+="#"+this[y]),0<this[x].length&&(this[v]+="."+this[x].join("."))}static build(a,b){b=void 0===b?"":"."+f(b);let c=new s(a[v]+b),d=a[w];for(let e in d)"string"==typeof d[e]&&(d[e]=new A(0>d[e].indexOf(".")?d[e]+"."+e:d[e])),d[e]instanceof A?(c[e]=A.build(d[e]),c.node.appendChild(c[e].node)):"function"==typeof d[e].appendTo&&(d[e].appendTo(c),c[e]=d[e]);return c}}let B=Symbol();class C{constructor(a){this[B]=new m;let b=this.defaultParams();for(let c in this.params=a||{},"object"!=typeof a&&(this.params={}),b)this.params.hasOwnProperty(c)||(this.params[c]=b[c]);this.init(this.params),this.render(this.params),this.createStyles().renderFor(this,!1)}init(a){}on(a,b){this[B].on(a,b)}off(a,b){this[B].off(a,b)}trigger(a,...b){this[B].trigger(a,...b)}createScheme(){return new A({})}onBeforeRender(a){}onRender(a){}render(a){this.onBeforeRender(a),this.trigger("beforeRender");let b=this.createScheme();for(let c in"string"==typeof b?b=new A(b):!(b instanceof A)&&(b=new A("div",b)),this.rootElement=A.build(b,this.constructor.name),this.rootElement)this.rootElement.hasOwnProperty(c)&&(this.rootElement[c]instanceof s||this.rootElement[c]instanceof C)&&(this[c]=this.rootElement[c]);return this.onRender(a),this.trigger("render"),this}onBeforeAppend(a){return a}appendTo(a){let b=this.onBeforeAppend(a);this.trigger("beforeAppend"),b!==void 0&&(a=b);let c=a;"string"==typeof a?c=document.querySelector(a):a instanceof s?c=a.node:a instanceof C&&(c=a.rootElement.node),c.appendChild(this.rootElement.node),this.onAppend(a),this.trigger("append",a)}onAppend(a){}onBeforeLoad(a){}onLoad(a,b){}onGather(a,b){}createStyles(){return new u({})}defaultParams(){return{}}}window.UIScheme={UI:C,Scheme:A,Styles:u,EventsChannel:m}})();
//# sourceMappingURL=ui-scheme.min.js.map
